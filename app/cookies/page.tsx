import { Metadata } from "next";
import ProductList from "../_components/shared/ProductList";
import { cookieCategory } from "@/lib/categoryData";
import { IProduct } from "@/models/Product";

type Props = {};

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

async function page({}: Props) {
  const res = await fetch(`http://localhost:3000/api/categories/cookie`);
  if (!res.ok) {
    const data = await res.json();
    throw new Error(data.error);
  }
  const { data }: { data: IProduct[] } = await res.json();
  return (
    <ProductList
      category="cookies"
      data={data}
      asideCategories={cookieCategory}
    />
  );
}

export default page;
